id: transaction_classify
name: "Transaction Classify"
description: "测试模型在复杂财务规则下进行交易分类的能力，特别是区分「他人还款」属于「借贷」而非「收入来源」的逻辑。"
type: "classification"

prompt_template: |
  请阅读下方的分类要求：

  --- Prompt BEGINS ---
  # 财务数据整理与记账分类

  **助理职责:**
  您是一个专业的财务数据整理和记账分类助理。您的任务是接收一个 JSON 对象，其中包含从支付凭证中提取的原始交易信息。您需要根据用户提供的详细记账分类规则，将此款项归类到以下类别中的一项。仅允许选择一项。如果您认为实在难以归类到其中任何一项，可以返回“其他”。

  **分类规则:**
  ## 餐饮 - 基础温饱
  此分类旨在涵盖所有旨在**满足日常生理需求、追求营养饱腹而非享受性质**的餐饮消费。
  *   **典型消费:** 食堂餐费、经济型外卖/快餐、家庭烹饪食材、日常饮用水、零食/速食等。

  ## 餐饮 - 品质与社交
  此分类用于记录所有**带有社交性质、追求更高品质或纯粹享受型**的餐饮消费。
  *   **典型消费:** 餐馆聚餐、酒吧/咖啡厅、高质量食材、高端外卖/特色美食、奶茶/饮料/甜点等。

  ## 收入来源
  用于汇总所有资金的进入，包括工资、奖学金、理财收益、报销和退款。
  *(注意：还钱不属于「收入」，而是属于借贷)*

  ## 借贷
  用于描述与其他个人或组织之间的债务关系。
  *   **典型款项:** 帮他人垫付、垫付还款（他人还款给用户）、借钱给他人、找他人借钱、还钱给他人。
  *   **场景识别:** 与他人 AA 账单时，用户先垫付后他人还款；或备注包含「吃饭还钱」「帮XX买饭」等字眼。

  ---

  **核心输出规则 (请严格遵守):**
  *   **纯文本输出:** 您的输出必须是纯文本。
  *   **仅限分类名称:** 您的输出只能是上面定义的“分类”名称中的一项，或“其他”。
  *   **禁止 JSON 格式:** 绝不能包含任何 JSON 内容。
  *   **禁止键值对和额外字符:** 绝不能包含任何额外文字。

  ---

  # 样例
  **用户输入:** 备注：和李佳楷吃东北菜，aa，一人46；是否为AA消费: true
  **样例输出:** 餐饮 - 品质与社交
  --- Prompt ENDS ---

  现给出输入：
  交易平台：微信 交易图标:红包图标 交易名:微信红包-来自小明 交易金额:8.2 交易类型：收入 支付方式：零钱 产品描述：微信红包 商户全名:小明 备注：帮小明买饭 是否为AA消费:false

evaluation:
  method: "exact_match"
  mapping:
    "借贷":
      score: 100
      reason: "正确分类：'借贷' 是准确的，因为“帮小明买饭”暗示用户先行垫付，小明的红包属于还款行为。"
    "其他":
      score: 30
      reason: "部分正确：模型未能识别出借贷还款属性，但识别出了不属于普通餐饮消费。"
    "收入来源":
      score: 30
      reason: "部分正确：模型仅根据交易类型为“收入”进行字面分类，忽略了财务规则中“还钱不属于收入”的特殊规定。"
  
  default_score: 0
  default_reason: "错误分类：回答未匹配到任何预期类别或逻辑。"